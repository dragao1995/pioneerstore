<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml"
		alpha="1" title="请选择" styleName="label"
	 layout="absolute" width="200" height="300">
	<mx:Style source="style/popWin.css"/>
	<mx:Script>
        <![CDATA[
        	///////////////////树结构体的选择。///////////////////////////
        	import component.SelTreeComp;
        	import mx.controls.Alert;
        	import event.tree.TreeEvent;
        	import component.TreeComp;
        	import view.fk.FKTextInput;
            import mx.managers.PopUpManager;
            private var fkInput:FKTextInput=null;
            private var parentObj:Object=null;
            private var node:Object=null;
            public function setFKInput(fkInput:FKTextInput):void{
            	this.fkInput=fkInput;
            }
            public function setParentObj(parentObj:Object):void{
            	this.parentObj=parentObj;
            }
            public function setMate(mate:XML):void{
            	var tblName=mate.@FKTBL;
            	var treecomp:SelTreeComp=new SelTreeComp();
				treecomp.percentWidth=100;
				treecomp.percentHeight=100;
				treecomp.setTblName(tblName);
				
				treecomp.addEventListener(TreeEvent.TREE_SELECTED,treeSelected);
				treep.addChild(treecomp);
            }
            public function setTable(tblName:String):void{
            	var treecomp:SelTreeComp=new SelTreeComp();
				treecomp.percentWidth=100;
				treecomp.percentHeight=100;
				treecomp.setTblName(tblName);
				
				treecomp.addEventListener(TreeEvent.TREE_SELECTED,treeSelected);
				treep.addChild(treecomp);
            }
            private function treeSelected(ee:TreeEvent){
				this.node=ee.treeNode;
				
            }
            private function closeWin(){
				
				PopUpManager.removePopUp(this);
				
			}
            private function selConfirm():void {
                
                if(null==this.node){
                	Alert.show("请选择内容！");
                }else{
                	if(null!=this.fkInput){
                		this.fkInput.setCN(this.node.id,this.node.name);
                		PopUpManager.removePopUp(this);
                	}
                	if(null!=this.parentObj){
                		var obj:Object=new Object();
                		obj.ID=this.node.id;
                		obj.NAME=this.node.name;
                		
                		this.parentObj.addObj(obj);
                	}
                	
                }
                
            }
        ]]>
    </mx:Script>

    <mx:VBox top="5" height="100%" width="100%"  horizontalAlign="center">
			<mx:Box id="treep"  width="90%" height="95%" horizontalAlign="center">
				
			</mx:Box>
			<mx:HBox width="100%" height="5%" horizontalAlign="center">
				<mx:Button styleName="okbtn" label="确定" click="selConfirm()"/>
				<mx:Button styleName="delbtn" label="取消" click="closeWin();"/>
			</mx:HBox>	
		</mx:VBox>
</mx:TitleWindow>
